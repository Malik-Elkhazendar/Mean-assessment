<div class="reset-password-container">
  <div class="reset-password-content">
    <!-- Simple Brand Header -->
    <div class="brand-header">
      <div class="brand-text">
        <h1 class="brand-name">Reset Your Password</h1>
        <p class="brand-tagline">Enter your new password to complete the reset process</p>
      </div>
    </div>

    <!-- Form Container using ui-card -->
    <ui-card
      [variant]="'elevated'"
      [elevation]="2"
      [hoverable]="false"
      [dense]="false"
      class="reset-password-card">

      <!-- Error Alert -->
      <ui-alert 
        *ngIf="(error$ | async) && ((isLoading$ | async) === false)"
        type="error"
        [message]="(error$ | async)!"
        [dismissible]="true"
        (dismissed)="clearError()">
      </ui-alert>

      <!-- Success Alert -->
      <div *ngIf="(successMessage$ | async) && ((isLoading$ | async) === false)">
        <ui-alert 
          type="success"
          [message]="(successMessage$ | async)!">
        </ui-alert>
        
        <!-- Success Actions -->
        <div class="success-actions" style="margin-top: 20px; text-align: center;">
          <ui-button
            [variant]="'raised'"
            [color]="'primary'"
            [content]="'Go to Login Page'"
            routerLink="/auth/login"
            [fullWidth]="true"
            [type]="'button'">
          </ui-button>
        </div>
      </div>

      <!-- Loading State -->
      <div *ngIf="(isLoading$ | async) === true" class="loading-container">
        <ui-spinner message="Resetting your password..."></ui-spinner>
      </div>

      <!-- Reset Password Form -->
      <form 
        *ngIf="((isLoading$ | async) === false) && ((successMessage$ | async) === null || (successMessage$ | async) === undefined)"
        [formGroup]="resetForm" 
        (ngSubmit)="onSubmit()" 
        class="reset-password-form fade-in">
        
        <div class="form-field">
          <ui-form-input
            label="Email Address"
            type="email"
            [required]="true"
            [autocomplete]="'email'"
            [formControl]="emailControl"
            [error]="getFieldError('email')"
            placeholder="Enter your email address">
          </ui-form-input>
        </div>

        <div class="form-field">
          <ui-form-input
            label="New Password"
            type="password"
            [required]="true"
            [autocomplete]="'new-password'"
            [formControl]="passwordControl"
            [error]="getFieldError('password')"
            placeholder="Enter your new password">
          </ui-form-input>
        </div>

        <div class="form-field">
          <ui-form-input
            label="Confirm Password"
            type="password"
            [required]="true"
            [autocomplete]="'new-password'"
            [formControl]="confirmPasswordControl"
            [error]="getFieldError('confirmPassword')"
            placeholder="Confirm your new password">
          </ui-form-input>
        </div>

        <!-- Submit Button -->
        <div class="reset-button">
          <ui-button
            [variant]="'raised'"
            [color]="'primary'"
            [content]="'Reset Password'"
            [disabled]="(isLoading$ | async) ?? false"
            [loading]="(isLoading$ | async) ?? false"
            [fullWidth]="true"
            [type]="'button'"
            (buttonClick)="onSubmit()">
          </ui-button>
        </div>

        <!-- Back to Sign In Link -->
        <div class="signin-link">
          <ui-button
            [variant]="'text'"
            [color]="'primary'"
            [content]="'Back to Sign In'"
            routerLink="/auth/login"
            [fullWidth]="true"
            [type]="'button'">
          </ui-button>
        </div>
      </form>

    </ui-card>
  </div>
</div>